<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>QRコード発行</title>
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    <style>
        body {
            color: white; /* 文字の色を白に設定 */
            background-color: #333; /* 背景色をダークグレーに設定 */
            font-family: Arial, sans-serif; /* フォントを設定 */
            margin: 20px; /* マージンを設定 */
        }
        button {
            background-color: #007BFF; /* ボタンの背景色を青に設定 */
            color: white; /* ボタンの文字色を白に設定 */
            border: none; /* ボーダーを無しに設定 */
            padding: 10px 15px; /* パディングを設定 */
            cursor: pointer; /* カーソルをポインターに変更 */
            border-radius: 5px; /* ボタンの角を丸くする */
            transition: background-color 0.3s; /* 背景色の遷移を設定 */
        }
        button:hover {
            background-color: #0056b3; /* ホバー時の背景色 */
        }
    </style>
</head>
<body>
    <h1>QRコード発行（店舗用）</h1>
    <button id="generate-button">ランダムQRコードを生成</button>
    <canvas id="qr-code"></canvas>
    <p id="qr-code-message"></p>

    <script>
        // ランダム8桁数字生成関数
        function generateRandomNumber() {
            return Math.floor(10000000 + Math.random() * 90000000).toString(); // 8桁のランダム数字を生成
        }

        document.getElementById("generate-button").addEventListener("click", function() {
            // ランダムな8桁数字を生成
            const code = generateRandomNumber();
            const timestamp = new Date().getTime();  // 現在のタイムスタンプ

            // QRコードの値を「数字:タイムスタンプ」とする
            const qrValue = `${code}:${timestamp}`;

            // QRコードを生成
            const qr = new QRious({
                element: document.getElementById('qr-code'),
                value: qrValue,
                size: 200 // QRコードのサイズ
            });

            // ローカルストレージにQRコードデータを保存
            localStorage.setItem("currentQRCode", qrValue);
            document.getElementById("qr-code-message").textContent = `QRコードが生成されました。パスコード: ${code}`; // 生成したパスコードを表示
        });
    </script>
</body>
</html>
